name: Build woff2 for all platforms

on: push

jobs:
    build:
        strategy:
            matrix:
             target: [ubuntu-latest, windows-latest, macos-latest]
        runs-on: ${{ matrix.target }}
        steps:
            - uses: actions/checkout@v4
              with:
                repository: 'google/woff2'
                submodules: true
            - run: |
                mkdir build
                cd build
                cmake ..
            - run: make
            - run: ls -l
            - uses: actions/upload-artifact@v4
              with:
                name: woff2-${{matrix.target}}
                path: woff2_compress
