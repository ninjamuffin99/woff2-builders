name: Build woff2 for all platforms

on: workflow_dispatch

jobs:
    build:
        strategy:
            matrix:
             target: [ubuntu-latest, windows-latest, macos-latest]
        runs-on: ${{ matrix.target }}
        steps:
            - uses: actions/checkout@v4
              with:
                repository: 'google/woff2'
                submodules: true
            - run: mkdir out-static
            - run: cmake -DBUILD_SHARED_LIBS=OFF ..
            - run: make
            - run: make install
            - run: ls -l
            - uses: actions/upload-artifact@v4
              with:
                name: woff2
                path: out-static
